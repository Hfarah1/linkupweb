{% extends 'baseback.html.twig' %}

{% block title %}Ajouter une Catégorie{% endblock %}

{% block body %}

<!-- Header -->
<div class="container-fluid page-header py-5">
    <h1 class="text-center text-white display-6">Add a category</h1>
    <ol class="breadcrumb justify-content-center mb-0">
        <li class="breadcrumb-item"><a href="#">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Pages</a></li>
        <li class="breadcrumb-item active text-white">Add a category</li>
    </ol>
</div>

<!-- FORM START -->
{{ form_start(form) }}
<div class="container-fluid contact py-5">
    <div class="container py-5">
        <div class="p-5 bg-light rounded">
            <div class="row g-4">
                <!-- Title -->
                <div class="col-12">
                    <div class="text-center mx-auto" style="max-width: 700px;">
                        <h1 class="text-primary">ADD AND HAVE FUN</h1>
                        <p class="mb-4">IN OUR WEBSITE, OF COURSE YOU CAN CREATE YOUR EVENT</p>
                    </div>
                </div>

                <!-- LEFT COLUMN -->
                <div class="col-lg-7">
                    <div class="form-item w-100">
                                {{ form_label(form.imagePath, 'categorie', {'label_attr': {'class': 'form-label my-3'}}) }}
                                <div class="custom-file">
                                    {{ form_widget(form.imagePath, {'attr': {
                                        'class': 'form-control',
                                        'onchange': 'previewImage(this)'
                                    }}) }}
                                    {{ form_errors(form.imagePath) }}
                                </div>
                                <div class="mt-2" id="imagePreview" style="display:none;">
                                    <img id="preview" src="#" alt="Aperçu du categorie" class="img-thumbnail" style="max-width: 150px; max-height: 150px;">
                                </div>
                    </div>
                    
                </div>

                <!-- RIGHT COLUMN -->
                <div class="col-lg-5">

                    
                    {{ form_row(form.titre, {
                        'attr': {'class': 'w-100 form-control border-0 py-3 mb-4', 'placeholder': 'Name of event'}
                    }) }}
                     
                    {{ form_row(form.description, {
                        'attr': {'class': 'w-100 form-control border-0 py-3 mb-4', 'placeholder': 'description'}
                    }) }}
                       <div class="mb-4">
                            {{ form_label(form.dateDebut, 'Date de début', {'label_attr': {'class': 'form-label'}}) }}
                                {{ form_widget(form.dateDebut, {
                                    'attr': {
                                        'class': 'form-control datepicker-custom',
                                        'placeholder': 'Choisissez la date de début'
                                    }
                                }) }}
                                {{ form_errors(form.dateDebut) }}
                        </div>

                        <div class="mb-4">
                            {{ form_label(form.dateFin, 'Date de fin', {'label_attr': {'class': 'form-label'}}) }}
                            {{ form_widget(form.dateFin, {
                                'attr': {
                                    'class': 'form-control datepicker-custom',
                                    'placeholder': 'Choisissez la date de fin'
                                }
                            }) }}
                            {{ form_errors(form.dateFin) }}
                        </div>

   
                    



                </div>

                <div class="mt-4">
                    <button type="submit" class="btn btn-primary">Enregistrer</button>
                    <a href="{{ path('eventslist')}}" class="btn btn-outline-secondary ms-2">Retour à la liste</a>
                </div>
            </div>
        </div>
    </div>
</div>
{{ form_end(form) }}
<!-- FORM END -->

<script>
        function previewImage(input) {
            const preview = document.getElementById('preview');
            const previewContainer = document.getElementById('imagePreview');
            
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    previewContainer.style.display = 'block';
                }
                
                reader.readAsDataURL(input.files[0]);
            } else {
                preview.src = '#';
                previewContainer.style.display = 'none';
            }
        }
    </script>
    {# CSS et JS du datepicker #}
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/css/bootstrap-datepicker.min.css">
<script src="https://cdn.jsdelivr.net/npm/bootstrap-datepicker@1.9.0/dist/js/bootstrap-datepicker.min.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        $('.datepicker-custom').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true,
            todayHighlight: true
        });
    });
</script>


{% endblock %}
